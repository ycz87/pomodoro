# 🍉 西瓜时钟 — 更新日志

所有版本的用户可见变更记录。

---

## v0.27.0（2026-02-19）
- **基因注入系统**（Phase 3 Step 2）：将基因片段注入种子，定向培育目标星系品种
  - 实验室新增「基因注入」操作区：选择星系基因 + 种子品质 → 注入
  - 注入消耗 1 个基因片段 + 1 颗种子，生成注入种子
  - 注入种子存储目标星系信息，种植时品种从目标星系中随机
  - 种植弹窗新增注入种子选项（🧬 标记 + 目标星系名称）
  - i18n：8 种语言完整支持（11 个新 key）
  - E2E 测试覆盖注入、种植、消耗、持久化、i18n

## v0.26.0（2026-02-18）
- **基因片段系统**（Phase 3 Step 1）：收获品种时获得基因片段
  - 收获任意品种自动获得 1 个基因片段，携带星系/品种/稀有度信息
  - 新增「实验室」tab（农场页第三个子标签）
  - 基因背包 UI：按星系分组展示，点击展开查看片段详情
  - 基因数据持久化到 localStorage，独立存储
  - i18n：8 种语言完整支持
  - E2E 测试覆盖 AC1-7

## v0.25.0（2026-02-18）
- **青瓜阶段**：新增 green 生长阶段（🍈），6 阶段更均匀分布
- **揭晓延后**：品种揭晓从 20% 延后到 60%，增加悬念感
- **种植修复**：种子扣除与地块更新原子化，防止种子白扣
- **种植简化**：去掉星系选择步骤，品种从所有已解锁星系随机分配
- **i18n**：8 种语言新增青瓜阶段名称

## v0.24.3（2026-02-18）
- **Tooltip 层级修复**：tooltip 弹出时地块容器提升 z-index，不再被后面的地块遮挡
- **倍率精简**：调试倍率改为 1x / 100x / 1000x / 10000x，去掉低档位

## v0.24.2（2026-02-18）
- **农场体验优化补丁**
  - **Tooltip 气泡**：移除地块上的直接文字显示，改为点击地块弹出气泡显示进度详情，界面更清爽
  - **实时生长**：Debug Toolbar 时间倍率（5x~1000x）现在实时生效，无需刷新页面
  - **新增倍率**：调试工具栏新增 1000x 倍率选项

## v0.24.1（2026-02-18）
- **农场体验优化**：增强生命力感与信息透明度
  - **进度可视化**：Growing 地块显示具体生长时间（`已生长 XX / 共需 XX`），手机端自适应精简显示
  - **加速提示**：进度 < 50% 时显示 `专注可加速生长 ⚡` 提示
  - **生命力动画**：植物 Emoji 增加微风摇摆动画（不同阶段幅度不同），不再静止
  - **规则说明**：新增农场规则弹窗（ℹ️ 按钮入口），涵盖种植/生长/收获/枯萎/解锁说明
  - **i18n**：全功能支持 8 种语言

## v0.24.0（2026-02-18）
- **Debug Toolbar（调试工具栏）**：设置面板版本号连点 7 次激活，底部半透明可折叠面板
  - 瓜棚：快速添加各阶段道具、清空瓜棚
  - 农场：立即成熟、批量添加品种、重置农场
  - 专注：快速完成当前计时
  - 时间倍率：1x / 5x / 10x / 50x / 100x 加速农场生长
  - 数据：一键重置所有 localStorage 数据
- 旧 Settings 内嵌 Test Mode 已移除，功能全部迁移至 Debug Toolbar
- 新增 12 条 E2E 测试覆盖全部调试功能

## v0.23.3（2026-02-18）
- **手机端裁切彻底修复**：grid 容器改用 `max-w-[90%]` 百分比约束，任何手机视口宽度下 perspective 变形后底部行都不溢出
- 新增 500px 宽视口 E2E 测试验证

## v0.23.2（2026-02-18）
- **手机端底部地块裁切修复**：perspective + rotateX 导致底部行视觉变宽超出屏幕，给 grid 容器加内边距 + overflow-visible 解决
- PC 端不受影响

## v0.23.1（2026-02-18）
- **手机端地块比例优化**：手机端地块从 3:4 改为正方形（aspect-square），解决底部三块地溢出屏幕问题
- 手机端 grid gap 从 6px 收紧到 4px
- 手机端容器 padding 收紧，确保 390×844 视口一屏显示 9 块地
- PC 端布局完全不变（保持 3:4 比例 + gap 8px）

## v0.23.0（2026-02-18）
- **瓜田布局改版**：从菱形等距布局改为俯视微倾斜 3×3 CSS Grid
- 地块改为圆角矩形，CSS perspective + rotateX 伪 3D 感
- 地块比例统一 3:4（宽:高），手机端和桌面端一致
- 手机竖屏一屏显示完整 9 块地，间距收紧不溢出
- 新增 LockedPlotCard 组件：未开发地块灰显锁定（🔒 + 解锁条件）
- farmUnlockHint i18n 8 种语言全覆盖
- 移除 diamondClip 菱形裁剪

## v0.21.5（2026-02-16）
- **瓜棚 Tab 改版**：瓜棚页面拆分为「🍉 瓜棚」和「🎒 背包」两个 Tab
- 瓜棚 Tab：收获物网格 + 合成区 + 切瓜区，一条龙流程
- 背包 Tab：种子区（三品质）+ 道具区（9 种道具 + 风味文案）
- Segmented Control 风格切换，带滑块动画
- 8 种语言 Tab 名称全覆盖

## v0.21.4（2026-02-16）
- **切瓜按钮醒目化**：大西瓜用红色实底按钮、金西瓜用金色实底按钮，更大更粗更有吸引力
- **完整西瓜 SVG**：切瓜场景 ready 阶段显示完整圆形西瓜（绿色条纹/金色条纹），切开后才变两半
- **切开仪式感增强**：屏幕闪白 + 震动 + 更粗更亮的刀光 + 更多更大的汁水粒子 + 金西瓜金光爆发 + 慢分离动画
- **修复结果卡片按钮无反应**：result 阶段禁用容器 mouse/touch handler + 结果卡片 stopPropagation

## v0.21.3（2026-02-16）
- **修复移动端切瓜触发页面刷新**：切瓜场景打开时禁用 pull-to-refresh 和页面滚动，关闭后自动恢复

## v0.21.2（2026-02-16）
- **农场揭晓动画升级**：rare 及以上稀有度增加旋转光带/粒子层，文字发光与阴影增强，入场动画时长延长并带弹性
- **收获动画分流**：新品种加入全屏烟花粒子与 `NEW` 闪烁徽记；重复品种改为低调背景并显示已收集次数
- **地块进度条质感优化**：在原稀有度颜色基础上增加 glow，epic / legendary 进度条新增流动高光
- **收获结果信息增强**：农场收获返回 `collectedCount`，用于重复品种提示

## v0.21.1（2026-02-16）
- **连切 Combo**：连续切瓜触发 3 连"切瓜达人"（+1 种子）、5 连"瓜神降临"（必出传说种子）
- **种子品质系统**：种子分为普通🌰、史诗💎、传说🌟三种品质
- **保底机制**：连续 30 瓜未出史诗种子必出，连续 80 瓜未出传说种子必出
- **切瓜场景增强**：Combo 计数器、里程碑特效、"继续切下一个"按钮
- **瓜棚种子区改版**：按品质分行显示，带颜色标识

## v0.21.0（2026-02-16）
- **新增切瓜系统 (MVP)**：连接瓜棚与农场的核心玩法
- **全屏切瓜动画**：支持滑动切割，带西瓜裂开、汁水飞溅动画及 Web Audio API 合成音效
- **种子与道具掉落**：切瓜可获得「神秘种子」及 9 种不同功能的「农场道具」
- **瓜棚 UI 大改版**：新增切瓜区、种子区、道具区，适配多语言和 5 套主题
- **存储系统升级**：新增 seeds 与 items 存储，持久化至本地

## v0.20.2（2026-02-16）
- 庆祝动画增强：时长加倍、图标放大、粒子数量翻倍、光晕层数和强度提升
- legendary 级别动画持续 14 秒，图标 180px，200 粒子

## v0.20.1（2026-02-16）
- 修复徽章图片被圆形容器裁切的问题，所有形状（六边形/盾牌/星形/方形圆角/圆形）完整显示
- 移除已解锁徽章容器的 boxShadow，消除深色主题下的黑色方块背景

## v0.20.0（2026-02-16）
- 成就页面 44 个徽章全部换成真实图片（AI 生成 PNG）
- 未解锁徽章显示灰色轮廓，隐藏系列显示 ❓
- 解锁庆祝动画使用真实图片（灰→彩色过渡）
- 图片加载失败自动回退到 emoji

## v0.19.4（2026-02-15）
- 安全加固：OAuth CSRF 防护、验证码暴力破解限制、CORS preflight 修复
- 输入校验：records/settings/achievements API 增加类型和大小校验
- Admin 搜索 LIKE 注入防护

## v0.19.3（2026-02-15）
- 成就数据云端同步 API

## v0.19.0 ~ v0.19.2（2026-02-14）
- 顶部导航栏重构：🍉专注 / 🏠瓜棚 / 🌱农场 三 Tab + 工具图标
- 番茄模式命名优化
- Auth 服务 URL 修复

## v0.18.0 ~ v0.18.1（2026-02-14）
- 成就系统完整版：44 个成就，5 个系列
- 隐藏系列完善（音效探索家、完美主义者、全能玩家）
- 成就按钮移至顶栏

## v0.17.0 ~ v0.17.2（2026-02-14）
- 成就徽章系统上线
- 坚持、专注、瓜棚、农场系列检测逻辑
- 成就页面 UI + 解锁庆祝动画

## v0.16.0（2026-02-13）
- 新增 6 种语言（日/韩/法/德/西/葡），共支持 8 种语言
- 语言选择弹窗

## v0.15.0（2026-02-13）
- 管理后台上线（admin.cosmelon.app）
- 用户管理：搜索、查看、角色管理

## v0.14.0（2026-02-13）
- 云端数据同步（设置/记录/仓库）
- 登录后自动拉取云端数据

## v0.13.0（2026-02-13）
- 个人资料编辑：头像上传 + 昵称修改

## v0.12.0（2026-02-13）
- Auth 认证服务拆分独立部署（auth.cosmelon.app）

## v0.11.0（2026-02-13）
- 用户登录系统（邮箱验证码 + Google/Microsoft OAuth）

## v0.10.0（2026-02-13）
- Cloudflare Workers API 骨架
- GitHub Actions CI/CD

## v0.9.0 ~ v0.9.2（2026-02-13）
- 健康提醒 Toast 系统
- Toast 体验优化 + 文案优化

## v0.8.0 ~ v0.8.8（2026-02-11 ~ 2026-02-12）
- 仓库与合成系统
- 防挂机机制
- 音量滑块 + Slider 样式优化
- 自动开始休息 UI 联动

## v0.7.0 ~ v0.7.1（2026-02-11）
- 品牌视觉升级：西瓜化
- 庆祝系统升级（6 阶段分层动画）

## v0.6.0 ~ v0.6.2（2026-02-10 ~ 2026-02-11）
- 智能鼓励文案
- 周趋势图
- 最后冲刺视觉效果优化

## v0.5.0 ~ v0.5.5（2026-02-10）
- 正计时/倒计时切换
- 隐藏滚动条 + PC 鼠标拖拽滚动
- 安卓黑屏修复 + 全局错误捕获

## v0.4.0 ~ v0.4.9（2026-02-08 ~ 2026-02-10）
- 番茄钟与项目模式交互重构
- UI 系统性改版 + 全主题对比度修复
- Logo 替换 + 品牌文字
- 多项 Bug 修复

## v0.3.0 ~ v0.3.1（2026-02-08）
- 项目计时模式

## v0.2.0 ~ v0.2.4（2026-02-08）
- 音效系统大改版：自定义混音器 + 提醒音效
- 背景音即时切换 + 新音效

## v0.1（2026-02-08）
- Tauri 桌面应用 + CI 自动构建
- 多语言支持（中/英）
- 品牌升级 + 历史统计
- MVP 上线
