# 🏆 成就徽章系统 — 设计文档 v2

> 版本：v2.0 | 日期：2026-02-14
> 所属系统：全局系统（跨番茄时钟/瓜棚/农场）
> 关联文档：[系统总览](OVERVIEW-v2.md) · [逐步解锁](UNLOCK-DESIGN-v1.md)

## 定位

成就系统是西瓜时钟的**长期目标引擎**。给用户一个持续追求的理由，让每一分钟专注都在"投资"。

核心原则：
- **可达但有挑战** — 不能太容易（没成就感），也不能遥不可及（放弃）
- **惊喜感** — 隐藏成就让用户有探索欲和分享欲
- **有价值** — 部分成就解锁实际奖励（主题/音效/庆祝动画），不只是看着好看

## v2 核心变更

**徽章系列从"行为维度"改为"功能模块维度"。** 用户一看就知道"这个徽章是我在哪个功能里获得的"，非常直觉。

---

## 一、徽章系列总览

| 系列 | 主色调 | 驱动目标 | 数量 |
|------|--------|---------|------|
| ⭐️ 坚持系列 | 暖橙 #FF8C42 | 全局忠诚度 & 使用习惯 | 10 |
| ⏱️ 专注系列 | 西瓜红 #FF3B5C | 专注功能模块表现 | 10 |
| 🏠 瓜棚系列 | 西瓜绿 #4CAF50 | 收集/合成/切瓜成就 | 10 |
| 🌱 农场系列 | 泥土棕 #8D6E63 | 种植/培育/收藏成就 | 8 |
| 🌟 隐藏/彩蛋系列 | 金紫渐变 #FFD700→#9C27B0 | 惊喜感 + 口碑传播 | 6 |
| **合计** | | | **44** |

每个系列 8-10 个，隐藏系列 5-6 个（持续补充）。

---

## 二、完整成就清单

### ⭐️ 坚持系列（10个）— 全局总徽章

衡量用户对整个西瓜时钟的忠诚度和使用习惯，不限于某个功能模块。

| # | 名称 | 英文名 | 解锁条件 | 描述文案 | 奖励 |
|---|------|--------|---------|---------|------|
| S1 | 三天打鱼 | Three-Day Streak | 连续打卡 3 天 | 好的开始是成功的一半 | — |
| S2 | 一周达人 | Week Warrior | 连续打卡 7 天 | 一整周！习惯正在生根发芽 🌿 | — |
| S3 | 半月坚持 | Fortnight Focus | 连续打卡 14 天 | 两周的坚持，西瓜田已经郁郁葱葱 | — |
| S4 | 钢铁意志 | Iron Will | 连续打卡 30 天 | 三十天，你证明了什么叫坚持 | 解锁"钢铁"徽章边框 |
| S5 | 百日传说 | Century Legend | 连续打卡 100 天 | 一百天不间断，你就是传说本身 | 解锁"百日"专属庆祝动画 |
| S6 | 累计百天 | Hundred Days | 累计使用天数 ≥100 天 | 一百天的陪伴，西瓜时钟已经是你生活的一部分 | — |
| S7 | 早起鸟 | Early Bird | 早上 6:00-8:00 完成专注 | 清晨的西瓜田，露珠还在叶子上 🌅 | — |
| S8 | 夜猫子 | Night Owl | 晚上 22:00-00:00 完成专注 | 夜深了，你的西瓜还在安静地生长 🌙 | — |
| S9 | 周末战士 | Weekend Warrior | 周六和周日都完成了专注 | 别人在休息，你在成长 💪 | — |
| S10 | 西瓜元年 | Year One | 注册/首次使用满 365 天 | 一整年，你和西瓜时钟一起走过了四季 🎂 | 解锁"周年纪念"专属徽章边框 |

### ⏱️ 专注系列（10个）— 专注功能模块

衡量用户在专注计时这个核心功能上的表现。

| # | 名称 | 英文名 | 解锁条件 | 描述文案 | 奖励 |
|---|------|--------|---------|---------|------|
| F1 | 第一颗西瓜 | First Melon | 完成第 1 次专注 | 每一段旅程都从第一步开始 🌱 | — |
| F2 | 专注新手 | Focus Rookie | 累计专注 1 小时 | 一小时的专注，一小时的成长 | — |
| F3 | 专注达人 | Focus Pro | 累计专注 10 小时 | 十个小时，你的西瓜田已经初具规模 | — |
| F4 | 专注大师 | Focus Master | 累计专注 50 小时 | 五十小时的浇灌，荒漠变绿洲 | 解锁"大师"头衔 |
| F5 | 专注传奇 | Focus Legend | 累计专注 100 小时 | 一百小时，你已经是时间的朋友 | 解锁"传奇金框"徽章边框 |
| F6 | 时间领主 | Time Lord | 累计专注 500 小时 | 时间在你手中不再流逝，而是绽放 | 解锁"时间领主"专属主题 |
| F7 | 深度潜水 | Deep Dive | 单次专注 ≥45 分钟 | 你潜入了专注的深海 🐋 | — |
| F8 | 马拉松选手 | Marathon Runner | 单次专注 ≥90 分钟 | 九十分钟的极限专注，致敬你的意志力 | — |
| F9 | 日产十瓜 | Ten-a-Day | 一天完成 ≥10 次专注 | 今天的西瓜田大丰收！ | — |
| F10 | 项目达人 | Project Pro | 完成 10 个项目（所有子任务完成） | 十个项目，你已经是项目管理高手 | — |

### 🏠 瓜棚系列（10个）— 瓜棚功能模块

衡量用户在瓜棚里的收集、合成、切瓜成就。

| # | 名称 | 英文名 | 解锁条件 | 描述文案 | 奖励 |
|---|------|--------|---------|---------|------|
| H1 | 初次收获 | First Harvest | 获得第 1 个收获物 | 你的第一颗种子发芽了！ | — |
| H2 | 满园春色 | Full Garden | 集齐 5 种普通收获物 | 小芽、幼苗、小花、小瓜、大西瓜——你全都有了 | — |
| H3 | 金瓜降临 | Golden Arrival | 获得第 1 个金西瓜 | 传说中的金西瓜！你是被选中的人 ✨ | 解锁"金色光环"庆祝特效 |
| H4 | 金瓜收藏家 | Golden Collector | 获得 5 个金西瓜 | 五颗金西瓜，你的运气和实力都在线 | — |
| H5 | 仓库大亨 | Warehouse Tycoon | 仓库总收获物 ≥100 | 你的瓜棚快装不下了！ | — |
| H6 | 合成初体验 | First Synthesis | 第 1 次合成 | 把小的变成大的，这就是合成的魔力 | — |
| H7 | 合成大师 | Synthesis Master | 累计合成 ≥50 次 | 五十次合成，你已经是瓜棚里的炼金术士 | — |
| H8 | 第一刀 | First Slice | 第 1 次切瓜 | 咔嚓！你的第一刀切得真漂亮 🔪 | — |
| H9 | 切瓜百刀 | Hundred Slices | 累计切瓜 ≥100 次 | 一百刀下去，你已经是切瓜界的大师傅 | — |
| H10 | 道具全收集 | Tool Collector | 获得过所有类型的道具（用完了徽章还在） | 每一种道具你都拥有过，真正的收藏家 🧰 | — |

### 🌱 农场系列（8个）— 农场功能模块

衡量用户在农场里的种植、培育、收藏成就。

| # | 名称 | 英文名 | 解锁条件 | 描述文案 | 奖励 |
|---|------|--------|---------|---------|------|
| G1 | 播种者 | First Planting | 第 1 次种植 | 把种子埋进土里，期待它发芽的那一刻 🌱 | — |
| G2 | 第一次丰收 | First Farm Harvest | 第 1 次在农场收获成熟西瓜 | 从种子到西瓜，你亲手见证了整个过程 | — |
| G3 | 种植百株 | Hundred Plants | 累计种植 ≥100 株 | 一百株西瓜，你的农场已经是一片绿洲 | — |
| G4 | 星系征服者 | Galaxy Conqueror | 集齐一个星系的全部品种 | 这个星系的每一种西瓜，你都收入囊中 🌍 | — |
| G5 | 图鉴大师 | Codex Master | 集齐全部 28 个品种 | 整个西瓜宇宙的品种，你一个不落 | 解锁"宇宙之心"隐藏品种 |
| G6 | 外星人之友 | Alien Friend | 外星人到访累计 ≥10 次 | 你的农场已经成了外星人的热门打卡点 👽 | — |
| G7 | 瓜贼克星 | Thief Buster | 成功抵御瓜贼 ≥5 次 | 瓜贼看到你的农场就绕道走 🪤 | — |
| G8 | 不枯之田 | Evergreen Farm | 农场连续活跃 30 天（无枯萎） | 三十天，你的农场一直生机勃勃 | — |

### 🌟 隐藏/彩蛋系列（6个）— 预留扩展

不提前告知条件，随着功能迭代持续补充。解锁前显示为 "???" + 灰色问号图标。

| # | 名称 | 英文名 | 解锁条件（用户不可见） | 描述文案（解锁后显示） | 奖励 |
|---|------|--------|---------------------|---------------------|------|
| X1 | 时间旅行者 | Time Traveler | 在凌晨 00:00:00 ±30秒完成专注 | 你在时间的交界处种下了一颗西瓜 ⏰ | — |
| X2 | 情人节西瓜 | Valentine Melon | 在 2 月 14 日完成专注 | 今天的西瓜格外甜 💕 | — |
| X3 | 音效探索家 | Sound Explorer | 连续 7 天每天使用不同的背景音组合 | 你的耳朵比你的手更勤奋 🎧 | — |
| X4 | 完美主义者 | Perfectionist | 连续 5 次专注都完成（无一次放弃） | 五连完美，一个都不落下 | — |
| X5 | 全能玩家 | All-Rounder | 同一天在专注、瓜棚、农场都有操作 | 今天你把西瓜时钟玩了个遍！ | — |
| X6 | 午夜园丁 | Midnight Gardener | 凌晨 2:00-4:00 完成专注 | 全世界都睡了，只有你和西瓜还醒着 🌃 | — |

---

## 三、徽章视觉规范

### 基本形态
- **形状**：圆形，直径 64px（展示）/ 48px（列表）/ 32px（小图标）
- **未解锁**：灰色剪影 + 半透明 🔒 图标叠加，无颜色
- **已解锁**：系列主色调 + 图标 + 微光效果（subtle glow）
- **边框**：默认 2px 白色/深色描边；特殊奖励可解锁金框/钢铁框等

### 设计风格
- 与西瓜时钟整体一致：**卡通、圆润、可爱、有质感**
- 参考风格：Duolingo 成就徽章 / Apple Watch 活动奖章
- 每个徽章内有一个核心图形元素（不要塞太多东西）
- 颜色饱和度适中，在深色和浅色主题下都好看

### 系列色板
```
⭐️ 坚持系列：#FF8C42（暖橙）→ #FFB74D（浅橙）
⏱️ 专注系列：#FF3B5C（西瓜红）→ #FF6B8A（浅红）
🏠 瓜棚系列：#4CAF50（西瓜绿）→ #81C784（浅绿）
🌱 农场系列：#8D6E63（泥土棕）→ #A1887F（浅棕）
🌟 隐藏系列：#FFD700（金色）→ #9C27B0（紫色）渐变
```

---

## 四、成就页面 UI

### 入口
- 设置页用户头像下方，新增 **"🏆 成就"** 按钮
- 未登录用户也可使用（数据存 localStorage）
- 按钮右上角显示未查看的新解锁数量红点

### 成就页面布局

```
┌─────────────────────────────────┐
│  🏆 成就                    ← 返回 │
│                                   │
│  ┌─────────────────────────────┐ │
│  │  已解锁 8 / 44              │ │
│  │  ████████░░░░░░░░  18%      │ │
│  └─────────────────────────────┘ │
│                                   │
│  ⭐️ 坚持系列                     │
│  ┌──┐ ┌──┐ ┌──┐ ┌──┐ ┌──┐ ...│
│  │🔥│ │📅│ │🔒│ │🔒│ │🔒│     │
│  └──┘ └──┘ └──┘ └──┘ └──┘     │
│  2 / 10                          │
│                                   │
│  ⏱️ 专注系列                     │
│  ...                              │
│                                   │
│  🏠 瓜棚系列                     │
│  ...                              │
│                                   │
│  🌱 农场系列                     │
│  ...                              │
│                                   │
│  🌟 隐藏系列                     │
│  ┌──┐ ┌──┐ ┌──┐ ┌──┐ ┌──┐ ┌──┐│
│  │❓│ │❓│ │❓│ │❓│ │❓│ │❓│  │
│  └──┘ └──┘ └──┘ └──┘ └──┘ └──┘ │
│  ? / 6                           │
└─────────────────────────────────┘
```

### 徽章详情弹窗

点击任意徽章弹出详情：

**已解锁：**
```
┌─────────────────────┐
│      [徽章大图]       │
│    ✨ 专注传奇 ✨     │
│                       │
│  "一百小时，你已经    │
│   是时间的朋友"       │
│                       │
│  解锁条件：累计100h   │
│  解锁时间：2026-03-15 │
│                       │
│  🎁 已解锁：传奇金框  │
└─────────────────────┘
```

**未解锁：**
```
┌─────────────────────┐
│      [灰色剪影]       │
│      🔒 专注大师      │
│                       │
│  解锁条件：累计50h    │
│  当前进度：32h / 50h  │
│  ████████░░░░  64%   │
└─────────────────────┘
```

**隐藏未解锁：**
```
┌─────────────────────┐
│        [???]         │
│       🔒 ???         │
│                       │
│  "这是一个隐藏成就"   │
│  "继续探索吧..."     │
└─────────────────────┘
```

---

## 五、解锁庆祝效果

### 触发时机
专注完成后，系统检查是否有新成就解锁。如果有：
1. 先播放正常的西瓜庆祝动画
2. 庆祝动画结束后（或用户点击关闭后），弹出成就解锁弹窗

### 解锁弹窗设计

```
┌─────────────────────────┐
│                           │
│    🎉 成就解锁！          │
│                           │
│    [徽章从灰色→彩色动画]   │
│                           │
│    ✨ 一周达人 ✨          │
│    "一整周！习惯正在       │
│     生根发芽 🌿"          │
│                           │
│    [查看成就]  [继续]      │
└─────────────────────────┘
```

### 动画效果
- 徽章从灰色剪影渐变为彩色（0.8s）
- 解锁瞬间有一圈光波扩散（类似涟漪）
- 背景有淡淡的金色粒子飘落
- 整体时长 2s，点击任意位置可关闭
- 如果同时解锁多个成就，依次展示（每个间隔 0.5s）

### 有奖励的成就
解锁弹窗底部额外显示：
```
🎁 奖励已解锁：时间领主专属主题
[立即使用]
```

---

## 六、数据存储

### localStorage（未登录用户）
```json
{
  "achievements": {
    "unlocked": {
      "F1": "2026-02-14T07:30:00Z",
      "F2": "2026-02-15T10:00:00Z",
      "S1": "2026-02-16T18:00:00Z"
    },
    "progress": {
      "totalFocusMinutes": 3600,
      "maxStreak": 7,
      "currentStreak": 3,
      "totalSessions": 45,
      "totalProjects": 2,
      "totalSynthesis": 12,
      "goldenMelons": 1,
      "totalSlices": 0,
      "totalPlants": 0,
      "totalFarmHarvests": 0,
      "alienVisits": 0,
      "thiefDefenses": 0,
      "farmActiveStreak": 0
    },
    "seen": ["F1", "F2", "S1"]
  }
}
```

### 云端同步（已登录用户）
- 新增 `achievements` 表或在 `user_settings` 中存储
- 与现有云同步机制一致：本地优先，异步推云端

---

## 七、成就检测逻辑

### 检测时机
- **专注完成时**：检查专注系列、坚持系列、隐藏系列
- **合成完成时**：检查瓜棚系列（H6/H7）
- **切瓜完成时**：检查瓜棚系列（H8/H9/H10）
- **农场操作时**：检查农场系列（种植/收获/外星人/瓜贼）
- **每日首次打开**：检查坚持系列（streak 相关）、农场系列（活跃天数）

### 性能考虑
- 成就检测是轻量计算（比较数字），不需要异步
- 在现有回调末尾追加检测
- 只检查未解锁的成就，已解锁的跳过

---

## 八、设计原则

1. **跟着功能模块走** — 用户一看系列名就知道"这是我在哪里获得的"
2. **每个系列均衡** — 8-10 个，不会某个系列特别多或特别少
3. **隐藏系列持续补充** — 新功能上线、特殊节日、跨模块组合，随时加
4. **道具用完徽章还在** — 证明你曾经拥有过，不会因为消耗而失去成就
5. **首次体验优先** — 每个功能模块都有"第一次"徽章，降低新功能的尝试门槛
