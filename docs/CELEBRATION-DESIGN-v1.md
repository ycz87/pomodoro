# 🎉 西瓜时钟 — 专注完成庆祝系统设计 v1

> 确认时间：2026-02-11
> 设计：小西
> 确认人：Charles Yu

## 设计背景

西瓜时钟已有基础的庆祝动画（CelebrationOverlay），但效果过于简单，用户感受不到"被庆祝"的仪式感。Charles 提出：庆祝画面要隆重，要让用户真的感觉到自己在被庆祝。

## 设计理念

1. **每个阶段都值得庆祝** — 即使只专注了几分钟得到一颗种子，也要让用户觉得"这是一个有价值的收获"，而不是"白专注了"
2. **越高阶越隆重** — 种子是温暖的希望感，大西瓜是盛大的庆典感。通过庆祝效果的差异，激励用户追求更长的专注时间
3. **文案要有温度** — 每句话都围绕当前收获物，既肯定当前成果，又暗示"再长一点就能得到更好的"
4. **视觉要有冲击力** — 射灯、金光、礼花这些元素不要吝啬，要让用户有截图分享的冲动
5. **不惩罚短专注** — 种子的庆祝虽然比大西瓜简单，但依然是正面的、温暖的，绝不能让用户觉得被嘲笑

## 现有生长阶段体系

代码已实现 5 个生长阶段（`src/types.ts` → `getGrowthStage`）：

| 专注时长 | 阶段 | 收获物 | SVG 图标 |
|---------|------|--------|---------|
| < 10 分钟 | seed | 🌱 种子发芽 | 黑色西瓜籽 + 小绿芽 |
| 10-15 分钟 | sprout | 🌿 幼苗 | 小绿苗 + 叶子 + 卷须 |
| 15-20 分钟 | bloom | 🌼 开花 | 藤蔓 + 黄色小花 |
| 20-25 分钟 | green | 🍈 青瓜 | 浅绿色未成熟西瓜 |
| ≥ 25 分钟 | ripe | 🍉 成熟西瓜 | 切开露出红瓤的大西瓜 |

图标素材：`src/components/GrowthIcon.tsx`（5 个 SVG 组件）

## 庆祝画面结构

每次完成专注，弹出全屏庆祝画面，由四层组成：

```
┌─────────────────────────────┐
│  背景层：射灯 / 灯光效果      │
│  ┌───────────────────────┐  │
│  │ 中间层：收获物特写       │  │
│  │ + 金光 / 光晕 / 光环    │  │
│  └───────────────────────┘  │
│  前景层：礼花 / 粒子 / 飘落物  │
│  ┌───────────────────────┐  │
│  │ 底部：随机鼓励文案       │  │
│  └───────────────────────┘  │
└─────────────────────────────┘
```

## 分阶段庆祝设计

### 🌱 种子（< 10 分钟）— "希望之光"

**氛围：** 温暖、柔和、充满希望

- **背景层：** 柔和的暖光从底部向上打，像舞台聚光灯，光晕缓缓呼吸
- **收获物：** 种子图标居中放大，背后一圈金色光晕缓缓脉动
- **前景层：** 金色光点缓缓上升（像萤火虫），数量少，节奏慢
- **持续时间：** 2 秒

**中文文案池：**
- "每一颗种子，都藏着一片西瓜田 🌱"
- "小小的开始，大大的可能 ✨"
- "种子已经在你手中，未来由你浇灌"
- "专注的第一步，已经迈出 🌱"
- "播下种子，静待花开"

**英文文案池：**
- "Every seed holds a watermelon field 🌱"
- "A small start, a big possibility ✨"
- "The seed is in your hands now"
- "Your first step of focus, taken 🌱"
- "Plant the seed, wait for the bloom"

---

### 🌿 幼苗（10-15 分钟）— "破土而出"

**氛围：** 生机勃勃、成长的喜悦

- **背景层：** 绿色光柱从下方射上来，两侧有淡淡的暖色光晕
- **收获物：** 幼苗图标居中放大，背后绿色 + 金色交织的光环
- **前景层：** 绿色叶片 + 金色光点飘落，数量适中
- **持续时间：** 2.5 秒

**中文文案池：**
- "小苗破土，专注正在生根 🌿"
- "看，你的努力已经发芽了"
- "坚持浇灌，它会长成参天大瓜 🌿"
- "每一分钟专注，都是阳光和雨露"
- "嫩芽已出，好事不远 🌿"

**英文文案池：**
- "A sprout breaks through — your focus is taking root 🌿"
- "Look, your effort is sprouting"
- "Keep going, it'll grow into something amazing 🌿"
- "Every minute of focus is sunshine and rain"
- "The sprout is here, good things are coming 🌿"

---

### 🌼 开花（15-20 分钟）— "绽放时刻"

**氛围：** 明亮、喜悦、舞台感

- **背景层：** 暖黄色射灯从两侧交叉打上来，有舞台灯光的感觉
- **收获物：** 花朵图标居中放大，背后放射状金光（像太阳光芒），光芒缓缓旋转
- **前景层：** 花瓣飘落 + 金色纸屑 + 少量礼花绽放
- **持续时间：** 3 秒

**中文文案池：**
- "西瓜花开了，果实还会远吗？🌼"
- "绽放的不只是花，还有你的专注力"
- "花开时节，好事将近 🌼"
- "再多一点点，就能结出果实了"
- "你的专注，正在开花结果 🌼"

**英文文案池：**
- "The flower blooms — can the fruit be far behind? 🌼"
- "Not just a flower blooming, but your focus too"
- "Blossom season, good things ahead 🌼"
- "Just a little more, and fruit will come"
- "Your focus is blooming 🌼"

---

### 🍈 青瓜（20-25 分钟）— "丰收在望"

**氛围：** 兴奋、期待、接近巅峰

- **背景层：** 多束射灯从不同角度打上来，光影交错，动感强
- **收获物：** 青瓜图标居中，缓缓旋转展示，背后强烈的金色放射光
- **前景层：** 彩色纸屑大量飘落 + 礼花从两侧绽放
- **持续时间：** 3.5 秒

**中文文案池：**
- "青瓜已成形，大丰收就在眼前 🍈"
- "差一点点就是完美的西瓜了！"
- "你的专注已经结出了果实 🍈"
- "再坚持一下，下次就是大西瓜！"
- "果实累累，你的努力看得见 🍈"

**英文文案池：**
- "The melon is forming — harvest is near 🍈"
- "So close to a perfect watermelon!"
- "Your focus has borne fruit 🍈"
- "A little more next time, and it's a big one!"
- "The fruit of your focus is showing 🍈"

---

### 🍉 成熟西瓜（≥ 25 分钟）— "盛大庆典"

**氛围：** 狂欢、震撼、最高荣耀

- **背景层：** 全屏金色 + 彩色射灯交替闪烁，舞台级灯光秀效果
- **收获物：** 大西瓜图标居中放大，背后爆炸式金光 + 光圈层层扩散
- **前景层：** 满屏礼花绽放 🎉 + 彩色纸屑雨 + 小西瓜从两侧滚入（随机效果池）
- **持续时间：** 4 秒

**随机庆祝效果池（每次随机选一种前景效果）：**
1. 满屏礼花连续绽放（经典庆祝）
2. 彩色纸屑暴风雨 + 金色闪光
3. 小西瓜从天而降 + 弹跳
4. 大西瓜从两侧滚入 + 碰撞弹开

**中文文案池：**
- "完美的大西瓜！你太棒了 🍉🎉"
- "这颗西瓜，是专注最甜的果实"
- "丰收时刻！你值得这份庆祝 🍉"
- "25 分钟的专注，换来最甜的西瓜 🎉"
- "大丰收！这就是专注的力量 🍉"

**英文文案池：**
- "A perfect watermelon! You're amazing 🍉🎉"
- "This melon is the sweetest fruit of focus"
- "Harvest time! You deserve this celebration 🍉"
- "25 minutes of focus for the sweetest reward 🎉"
- "Big harvest! This is the power of focus 🍉"

---

## 技术实现要点

### 视觉效果
- **射灯效果：** 用 `radial-gradient` + `opacity` 动画，不同角度叠加多个光源
- **金光/光晕：** 用 `box-shadow` 多层叠加 + `scale` 脉动动画
- **放射光芒：** 用 `conic-gradient` 或多个旋转的光线元素
- **礼花：** 扩展现有粒子系统（`generateParticles`），增加数量、颜色种类、运动轨迹多样性
- **纸屑：** 矩形粒子 + 旋转 + 重力下落
- **西瓜滚入：** CSS `translateX` + `rotate` 动画

### 粒子数量分级
| 阶段 | 粒子数 | 颜色数 | 特殊效果 |
|------|--------|--------|---------|
| seed | 12 | 2（金、暖黄）| 缓慢上升 |
| sprout | 20 | 3（金、绿、暖黄）| 飘落 |
| bloom | 30 | 4（金、黄、粉、绿）| 飘落 + 少量礼花 |
| green | 40 | 5（彩色）| 大量纸屑 + 礼花 |
| ripe | 60+ | 6+（全彩）| 礼花连发 + 随机特效 |

### 持续时间
| 阶段 | 总时长 | 进入动画 | 展示 | 退出动画 |
|------|--------|---------|------|---------|
| seed | 2.0s | 0.3s | 1.2s | 0.5s |
| sprout | 2.5s | 0.3s | 1.7s | 0.5s |
| bloom | 3.0s | 0.3s | 2.0s | 0.7s |
| green | 3.5s | 0.3s | 2.2s | 1.0s |
| ripe | 4.0s | 0.3s | 2.5s | 1.2s |

### 交互
- 点击任意位置可提前关闭（跳过动画）
- 所有动效用纯 CSS animation，不引入额外动画库
- 性能优先：粒子用 `transform` 和 `opacity`，触发 GPU 加速

### 现有代码基础
- `src/components/CelebrationOverlay.tsx` — 当前庆祝组件（需要重构升级）
- `src/components/GrowthIcon.tsx` — 5 阶段 SVG 图标（保留复用）
- `src/types.ts` → `getGrowthStage()` — 时长→阶段映射（保留）

---

## 与农场系统的关系

本方案是**当前版本的体验优化**，不依赖农场系统。但为后续版本做了铺垫：

- 切瓜系统（v0.8 计划）的切瓜动画是独立的，不在本方案范围内
- 本方案的庆祝效果在农场系统上线后依然保留，作为"专注完成"的即时反馈
- 农场系统的"收获"有自己的庆祝流程，与本方案互补

---

## 版本归属

本方案计划在 **v0.7.1** 实现（v0.7.0 已用于品牌视觉升级）。
