# 🌱 农场 — 设计文档 v2

> 版本：v2.1 | 日期：2026-02-14
> 所属系统：农场（种植园 + 图鉴 + 外星人）
> 关联文档：[系统总览](OVERVIEW-v2.md) · [番茄时钟](POMODORO-DESIGN-v2.md) · [瓜棚](SHED-DESIGN-v2.md)

## 定位

农场是西瓜宇宙的**终极目标**——把神秘种子种下去，看它一点点长大，成熟后揭晓品种，收入图鉴。

农场只接受一种输入：**瓜棚里的神秘种子**。

---

## 一、种植与生长

### 种植
- 从瓜棚选择神秘种子 → 放到农场地块上 → 种下
- 种下时种子外观统一为「🌰」，品种未知

### 生长阶段（视觉体验）
种下后，植物经历 5 个可见的生长阶段：

| 阶段 | 视觉 | 进度 |
|------|------|------|
| 🌰 种子期 | 土里的种子，微微隆起 | 0% |
| 🌱 发芽期 | 小芽破土而出（此时揭晓品种！） | 20% |
| 🌿 长叶期 | 藤蔓伸展，叶子变多 | 50% |
| 🌼 开花期 | 黄色小花绽放 | 75% |
| 🍉 结果期 | 西瓜逐渐长大，成熟可收获 | 100% |

> 发芽时揭晓品种。揭晓动画："叮！原来是 [品种名]！" 稀有品种有华丽特效。

### 生长周期：3 个活跃日

**核心机制：西瓜按"活跃天数"生长，不是真实时间。**

- **活跃日：** 当天只要打开 app 使用一会儿，就算 1 个活跃日，西瓜推进 1 天的生长进度
- **未打开：** 当天没打开 app → 生长暂停，不前进也不后退
- **枯萎：** 连续 3 天没打开 app → 西瓜枯萎 💀
- **基础节奏：** 3 个活跃日 = 从种子到成熟

### 专注加速

当天专注时间越长，当天推进的进度越多：

| 当天行为 | 推进进度 | 效果 |
|---------|---------|------|
| 打开 app 但没专注 | 1 天（保底） | 3 个活跃日成熟 |
| 累计专注 25 分钟 | 1.5 天 | 2 个活跃日成熟 |
| 累计专注 50 分钟 | 2 天 | 约 1.5 个活跃日成熟 |
| 累计专注 90 分钟+ | 3 天 | 当天直接成熟！ |

> 道具加速（星光肥料、超新星能量瓶等）叠加在此基础上。

### 收获
- 西瓜成熟后出现 ✋ 收获按钮
- 点击收获 → 品种特写 + 收藏动画 → 进入图鉴
- 新品种首次获得：华丽揭晓特效
- 重复品种：简单收获动画 + "已收藏"提示
- **成熟后超过 2 天没收获 → 瓜贼 100% 来偷走**

---

## 二、瓜贼机制

### 核心逻辑：用得越多越安全，用得越少越危险

瓜贼出现概率与用户当日使用时长挂钩：

| 当天行为 | 瓜贼出现概率 |
|---------|------------|
| 当天没打开 app | 15% |
| 打开 app 但没专注 | 5%（基础概率） |
| 当天累计专注 ≥25 分钟 | 2% |
| 当天累计专注 ≥60 分钟 | 0.5%（几乎不会被偷） |
| 成熟后超过 2 天没收 | 100%（必偷） |

### 瓜贼行为
- 瓜贼出现后，倒计时 30 分钟试图偷走一颗成熟/接近成熟的西瓜
- 如果有 🪤 瓜贼陷阱 → 瓜贼被抓，掉落 2 颗稀有种子 + 1 道具
- 如果有 🎪 西瓜马戏团帐篷 → 当天不会被偷
- 被偷了 → 西瓜消失，瓜贼留下一张"欠条"（纯趣味）

### 设计目的
"我今天专注一下，西瓜就安全了" → 专注保护西瓜，西瓜激励专注，完美闭环。

---

## 三、农场地块

### 初始容量
- 4 块地（可同时种 4 颗种子）

### 扩展方式
通过图鉴里程碑解锁：
- 集齐 3 个品种 → 解锁第 5 块地
- 集齐 12 个品种 → 解锁第 6 块地
- 后续持续扩展

### 地块有限的意义
- 种子会多于地块 → 需要选择先种哪个
- 配合 🔮 星际望远镜道具（提前看品种）→ 策略选择
- 制造"想要更多地块"的动力 → 推动图鉴收集

---

## 四、农场生命感

### 天气系统（纯视觉）
每次打开农场，天气随机：
- ☀️ 晴天 — 阳光明媚
- ☁️ 阴天 — 柔和光线
- 🌧️ 下雨 — 雨滴落在叶子上
- 🌙 星空 — 夜晚，萤火虫飞舞
- 🌈 彩虹 — 雨后彩虹（稀有）

> 纯视觉效果，不影响生长速度。每次打开都有新鲜感。

### 小动物（纯装饰）
偶尔出现在农场里：
- 🐝 蜜蜂在花上采蜜
- 🦋 蝴蝶飞过
- 🐞 瓢虫爬在叶子上
- 🐦 小鸟停在藤蔓上

> 不影响玩法，纯粹让人会心一笑。

### 西瓜性格
不同品种的西瓜生长动画不同：
- 有的长得快但爱歪
- 有的慢但特别圆
- 有的会长出奇怪形状
- 稀有品种有独特的生长特效（发光、冒泡等）

---

## 五、外星人系统

外星人随机造访农场，增加趣味和策略。也可以通过 🛸 外星信号弹主动召唤（但不知道来的是谁！）。

### 👽 瓜瓜星人（友好）
- **触发：** 农场有 ≥3 棵西瓜时，每天 10% 概率出现 / 外星信号弹召唤
- **行为：** 闲逛，随机给一棵西瓜浇"星光水"，加速生长
- **离开时：** 留下 1 颗神秘种子作为礼物
- **视觉：** 绿色小外星人，大眼睛，手里拿着发光水壶

### 🦹 瓜贼（捣蛋）
- **触发：** 根据用户当日使用时长概率出现（详见瓜贼机制）/ 外星信号弹召唤
- **行为：** 试图偷走一颗西瓜！倒计时 30 分钟
- **应对：** 🪤 瓜贼陷阱（捕获得奖励）/ 🎪 西瓜马戏团帐篷（当天免疫）
- **视觉：** 戴面具的紫色小外星人，鬼鬼祟祟

### 🧬 变异博士（亦正亦邪）
- **触发：** 外星信号弹召唤 / 使用 🧬 基因改造液时小概率出现
- **行为：** 随机选一棵正在生长的西瓜进行"实验"
- **结果：**
  - 60% — 品种变异！变成更高稀有度品种
  - 25% — 变异失败，变成"奇怪的东西"（纯装饰品，可收藏）
  - 15% — 大成功！变成当前星系的传说品种
- **视觉：** 戴护目镜的蓝色外星人，背着冒泡试剂瓶

### 后续外星人（Phase 2+）
- 🎁 **星际商人** — 用多余种子交换稀有种子或道具
- 🎵 **唱歌的外星人** — 给西瓜唱歌，成熟后品质 +1 级
- 🌪️ **太空风暴** — 随机事件，可能加速也可能减速

---

## 六、道具使用（农场侧）

所有道具存放在瓜棚，**只在农场使用**。

| 道具 | 农场效果 |
|------|---------|
| ⚡ 星光肥料 | 单株生长时间减半 |
| ☀️ 超新星能量瓶 | 全农场所有西瓜生长进度加速 50%，持续 24 小时 |
| 🛸 外星信号弹 | 随机召唤一位外星人（瓜瓜星人/瓜贼/变异博士） |
| 🪤 瓜贼陷阱 | 瓜贼来了被抓，掉落 2 颗稀有种子 + 1 道具 |
| 🔮 星际望远镜 | 提前看穿一颗未种下的神秘种子的品种 |
| 🌙 月光露水 | 给一棵西瓜浇上，成熟时品种稀有度 +1 级 |
| 🎪 西瓜马戏团帐篷 | 所有西瓜今天不会被偷 + 生长速度 +20% |
| 🧬 基因改造液 | 30% 概率变异成更高稀有度品种，10% 概率跨星系品种 |
| 🎵 西瓜摇篮曲唱片 | 所有西瓜今天生长速度 +30% |

---

## 七、星系与品种

### 星系设定

| 星系 | 风格 | 解锁条件 | 品种数 |
|------|------|---------|--------|
| 🌍 蓝星（地球） | 经典写实 | 默认解锁 | 8 个 |
| 🔥 炎晶星 | 火焰/岩浆 | 集齐蓝星 5 个品种 | 6 个 |
| 🧊 霜月星 | 冰雪/水晶 | 集齐蓝星全部品种 | 6 个 |
| 🌈 幻彩星 | 梦幻/彩虹 | 集齐任意 15 个品种 | 5 个 |
| 🌑 暗物质星 | 神秘/暗黑 | 集齐任意 20 个品种 | 3 个 |

**总计第一阶段：28 个品种**

### 稀有度体系
- ⭐ 普通 — 基础品种，容易获得
- ⭐⭐ 稀有 — 需要一些运气
- ⭐⭐⭐ 史诗 — 切瓜保底 30 次
- ⭐⭐⭐⭐ 传说 — 切瓜保底 80 次
- 👑 隐藏 — 特殊条件触发（如集齐全部品种）

### 品种详细列表

#### 🌍 蓝星（地球）— 8 个

| 品种 | 稀有度 | 掉率 | 一句话故事 |
|------|--------|------|-----------|
| 翠纹瓜 | ⭐ | 18% | 最经典的西瓜，绿皮白纹，地球瓜农的老朋友 |
| 黑珍珠 | ⭐ | 16% | 深黑色外皮下藏着最甜的秘密 |
| 蜜糖炸弹 | ⭐ | 15% | 甜到爆炸！咬一口能甜三天 |
| 迷你圆滚滚 | ⭐ | 14% | 巴掌大的小可爱，一个人刚好吃完 |
| 星月瓜 | ⭐⭐ | 7% | 深蓝色瓜皮上天然长着月亮和星星的图案 |
| 金心瓜 | ⭐⭐ | 6% | 切开是金黄色的果肉，像藏了一块黄金 |
| 冰糖雪瓜 | ⭐⭐⭐ | 3% | 白色果肉，入口即化，传说只在初雪时结果 |
| 方块瓜 | ⭐⭐⭐⭐ | 1% | 天然长成正方形的奇迹，全宇宙只有地球有 |

#### 🔥 炎晶星 — 6 个

| 品种 | 稀有度 | 掉率 | 一句话故事 |
|------|--------|------|-----------|
| 岩浆瓜 | ⭐ | 12% | 在火山口生长，果肉是流动的橙红色 |
| 焦糖裂纹瓜 | ⭐ | 10% | 表皮有天然焦糖色裂纹，越裂越甜 |
| 火焰纹瓜 | ⭐⭐ | 5% | 瓜皮上的纹路像跳动的火焰 |
| 熔岩心瓜 | ⭐⭐ | 4% | 中心有一颗会发光的"熔岩核"，切开时会冒烟 |
| 太阳石瓜 | ⭐⭐⭐ | 2% | 吸收了恒星能量，在黑暗中会微微发光 |
| 凤凰涅槃瓜 | ⭐⭐⭐⭐ | 0.5% | 传说被凤凰之火淬炼过，种子永远不会枯萎 |

#### 🧊 霜月星 — 6 个

| 品种 | 稀有度 | 一句话故事 |
|------|--------|-----------|
| 雪绒瓜 | ⭐ | 表面覆盖一层天然霜花，摸起来冰冰凉 |
| 冰晶瓜 | ⭐ | 半透明的瓜皮，能隐约看到里面的果肉 |
| 极光瓜 | ⭐⭐ | 瓜皮会随光线角度变色，像北极光 |
| 月光瓜 | ⭐⭐ | 只在月光下才会成熟，果肉是银白色的 |
| 钻石瓜 | ⭐⭐⭐ | 果肉里有天然结晶体，咬起来嘎嘣脆 |
| 永冻瓜 | ⭐⭐⭐⭐ | 零下 200 度也不会冻坏，宇宙最强保鲜 |

#### 🌈 幻彩星 — 5 个

| 品种 | 稀有度 | 一句话故事 |
|------|--------|-----------|
| 彩虹瓜 | ⭐⭐ | 七层不同颜色的果肉，每层味道都不一样 |
| 泡泡瓜 | ⭐⭐ | 切开会飘出彩色泡泡，小朋友最爱 |
| 星云瓜 | ⭐⭐⭐ | 果肉里有旋转的星云图案，每一颗都不同 |
| 时光瓜 | ⭐⭐⭐ | 据说吃了能回忆起最快乐的那一天 |
| 梦境瓜 | ⭐⭐⭐⭐ | 只存在于梦里的西瓜，没人说得清它的味道 |

#### 🌑 暗物质星 — 3 个

| 品种 | 稀有度 | 一句话故事 |
|------|--------|-----------|
| 虚空瓜 | ⭐⭐⭐ | 看起来是空的，但咬下去满嘴都是汁 |
| 黑洞瓜 | ⭐⭐⭐⭐ | 无限小的体积里藏着无限多的果肉 |
| 宇宙之心 | 👑 隐藏 | 整个西瓜宇宙的起源……集齐所有品种后出现 |

---

## 八、图鉴与里程碑

### 图鉴
- 按星系分类展示所有品种
- 未获得的品种显示剪影 + "???"
- 已获得的显示品种图 + 名字 + 故事 + 获得日期
- 稀有度用星星标识

### 里程碑奖励

| 里程碑 | 奖励 |
|--------|------|
| 集齐 3 个品种 | 解锁农场第 5 块地 |
| 集齐 5 个品种 | 解锁炎晶星品种池 |
| 集齐 8 个品种 | 解锁新专注主题「星际农场」 |
| 集齐 12 个品种 | 解锁农场第 6 块地 + 新背景音「宇宙白噪音」 |
| 集齐 15 个品种 | 解锁幻彩星品种池 |
| 集齐 20 个品种 | 解锁暗物质星品种池 + 农场装饰 |
| 集齐 25 个品种 | 解锁专属称号「瓜农宇航员」 |
| 集齐全部品种 | 解锁「宇宙之心」隐藏品种 + 终极农场主题 |

---

## 九、设计原则

1. **专注是核心** — 所有系统都指向"让用户更想专注"
2. **每天回来看看** — 活跃天数机制鼓励每天打开，但不强制长时间使用
3. **专注 = 安全** — 专注越多，瓜贼越不敢来，西瓜越安全
4. **惊喜驱动** — 神秘种子、外星人随机事件、变异结果，处处有惊喜
5. **成长可见** — 种子→发芽→开花→结果，每个阶段都有视觉变化
6. **收集欲** — 28 个品种 + 星系解锁 + 图鉴剪影，让人想集齐
7. **简洁操作** — 种植一点、收获一点，不搞复杂操作
8. **有生命感** — 天气、小动物、外星人来来去去，农场每天都不一样
9. **不过度惩罚** — 枯萎和被偷有明确规则，用户可以预防

---

## 十、开发计划

### Phase 1：切瓜 MVP（v0.17.0）— 见瓜棚设计文档

### Phase 2：农场 MVP（v0.18.0）— 预估 4-5 天
- 农场页面（4 块初始地块）
- 种植 + 5 阶段生长动画
- 活跃天数机制 + 专注加速
- 枯萎机制
- 神秘种子揭晓机制
- 道具生效
- 瓜贼机制（概率 + 陷阱 + 帐篷）
- 天气系统 + 小动物
- 基础图鉴页面

### Phase 3：收藏完善（v0.19.0）— 预估 3 天
- 完整图鉴 + 里程碑奖励
- 暗物质星品种（3 个）
- 更多外星人（星际商人等）
- 农场装饰系统
